<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<title>键盘控制移动</title>
		<style type="text/css">
			html,body{
				height: 100%;
			}
			div{
				width: 100px;
				height: 100px;
				background-color: orange;
				border-radius: 50%;
				position: absolute;
				top: 50px;
				left: 50px;
			}
		</style>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		function Circle(){
			
		}
		Circle.prototype.create = function(){
			$('body').html('<div id="d1"></div>');
		}
		Circle.prototype.moveup = function(){
			if($('#d1').offset().top > 0){
				$('#d1').css('top',$('#d1').offset().top - 5 + 'px');
			}	
		}
		Circle.prototype.movedown = function(){
			if($('#d1').offset().top < document.body.offsetHeight - 100){
				$('#d1').css('top',$('#d1').offset().top + 5 + 'px');
			}
		}
		Circle.prototype.moveleft = function(){
			if($('#d1').offset().left > 0){
				$('#d1').css('left',$('#d1').offset().left - 5 + 'px');
			}
		}
		Circle.prototype.moveright = function(){
			if($('#d1').offset().left < document.body.offsetWidth - 100){
				$('#d1').css('left',$('#d1').offset().left + 5 + 'px');
			}
		}
		Circle.prototype.move = function(e){
			var _this = this;
			var up = false;
			var down = false;
			var left = false;
			var right = false;
			window.onkeydown = function(e){
				switch (e.key){
					case 'w':
						{
							up = true;
						}
						break;
					case 's':
						{
							down = true;
						}
						break;
					case 'a':
						{
							left = true;
						}
						break;
					case 'd':
						{
							right = true;
						}
						break;
					default:
						break;
				}
				if(up){
					//$('#d1').animate({top:"-=10"},1);
					_this.moveup();
				}
				if(down){
					//$('#d1').animate({top:"+=10"},1);
					_this.movedown();
				}
				if(left){
					//$('#d1').animate({left:"-=10"},1);
					_this.moveleft();
				}
				if(right){
					//$('#d1').animate({left:"+=10"},1);
					_this.moveright();
				}
				if(up && left){
					//$('#d1').animate({top:"-=10",left:"-=10"},1);
					_this.moveup();
					_this.moveleft();
				}
				if(up && right){
					//$('#d1').animate({top:"-=10",left:"+=10"},1);
					_this.moveup();
					_this.moveright();
				}
				if(down &&  left){
					//$('#d1').animate({top:"+=10",left:"-=10"},1);
					_this.movedown();
					_this.moveleft();
				}
				if(down &&  right){
					//$('#d1').animate({top:"+=10",left:"+=10"},1);
					_this.movedown();
					_this.moveright();
				}
			}
			window.onkeyup = function(e){
				switch (e.key){
					case 'w':
						{
							up = false;
						}
						break;
					case 's':
						{
							down = false;
						}
						break;
					case 'a':
						{
							left = false;
						}
						break;
					case 'd':
						{
							right = false;
						}
						break;
					default:
						break;
				}
//				if(e.key == 's'){
//					down = false;
//				}
//				if(e.key == 'w'){
//					up = false;
//				}
//				if(e.key == 'a'){
//					left = false;
//				}
//				if(e.key == 'd'){
//					right = false;
//				}
			}
		}
		var circle = new Circle();
		circle.create();
		circle.move();
		console.log($('body').offset().top);
	</script>
</html>
